<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Fix - Onboarding</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .fix-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .fix-button {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        .fix-button:hover {
            background: #218838;
        }
        .success {
            color: green;
            font-weight: bold;
        }
        .error {
            color: red;
            font-weight: bold;
        }
        .info {
            color: blue;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>üöÄ Quick Fix - Onboarding Issue</h1>
    
    <div class="fix-section">
        <h2>Problem Identified</h2>
        <p>The onboarding completion is failing due to a database error. This quick fix will:</p>
        <ul>
            <li>‚úÖ Set localStorage to mark onboarding as completed</li>
            <li>‚úÖ Redirect you directly to the dashboard</li>
            <li>‚úÖ Bypass the database error temporarily</li>
        </ul>
    </div>

    <div class="fix-section">
        <h2>Quick Fix Options</h2>
        <button class="fix-button" onclick="quickFixAndRedirect()">
            üéØ Quick Fix & Go to Dashboard
        </button>
        <button class="fix-button" onclick="checkCurrentStatus()">
            üîç Check Current Status
        </button>
        <button class="fix-button" onclick="clearAndRestart()">
            üîÑ Clear & Restart Onboarding
        </button>
        <div id="fix-result"></div>
    </div>

    <div class="fix-section">
        <h2>What This Does</h2>
        <p><strong>Option 1:</strong> Sets onboarding as completed and redirects to dashboard</p>
        <p><strong>Option 2:</strong> Shows current localStorage and onboarding status</p>
        <p><strong>Option 3:</strong> Clears onboarding status to restart the process</p>
    </div>

    <script>
        function quickFixAndRedirect() {
            const result = document.getElementById('fix-result');
            result.innerHTML = '<span class="info">üîÑ Applying quick fix...</span>';
            
            // Set onboarding as completed
            localStorage.setItem('onboarding_completed', 'true');
            
            // Also set some additional flags to ensure it works
            localStorage.setItem('onboarding_step', '6');
            localStorage.setItem('onboarding_completed_at', new Date().toISOString());
            
            result.innerHTML = '<span class="success">‚úÖ Quick fix applied! Redirecting to dashboard...</span>';
            
            // Redirect to dashboard
            setTimeout(() => {
                window.location.href = '/';
            }, 1000);
        }

        function checkCurrentStatus() {
            const result = document.getElementById('fix-result');
            const onboardingCompleted = localStorage.getItem('onboarding_completed');
            const onboardingStep = localStorage.getItem('onboarding_step');
            const completedAt = localStorage.getItem('onboarding_completed_at');
            
            result.innerHTML = `
                <h3>Current Status:</h3>
                <p><strong>Onboarding Completed:</strong> <span class="${onboardingCompleted === 'true' ? 'success' : 'error'}">${onboardingCompleted || 'false'}</span></p>
                <p><strong>Onboarding Step:</strong> ${onboardingStep || 'not set'}</p>
                <p><strong>Completed At:</strong> ${completedAt || 'not set'}</p>
                <p><strong>Current URL:</strong> ${window.location.href}</p>
            `;
        }

        function clearAndRestart() {
            const result = document.getElementById('fix-result');
            result.innerHTML = '<span class="info">üîÑ Clearing onboarding status...</span>';
            
            // Clear all onboarding related localStorage
            localStorage.removeItem('onboarding_completed');
            localStorage.removeItem('onboarding_step');
            localStorage.removeItem('onboarding_completed_at');
            
            result.innerHTML = '<span class="success">‚úÖ Onboarding status cleared! Redirecting to onboarding...</span>';
            
            // Redirect to onboarding
            setTimeout(() => {
                window.location.href = '/onboarding';
            }, 1000);
        }

        // Auto-check status on page load
        window.onload = function() {
            checkCurrentStatus();
        };
    </script>
</body>
</html> 